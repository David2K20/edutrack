# Django Student Management System - Deployment Guide

## Deploy to Render

This Django application is configured to deploy to Render with Supabase PostgreSQL database.

### Prerequisites

1. GitHub account with this repository pushed
2. Render account
3. Supabase account and project (much easier than MySQL!)

### Set up Supabase Database (5 minutes)

1. **Go to [supabase.com](https://supabase.com)**
2. **Sign up** (free account)
3. **Create New Project**:
   - Project name: `student-management-system`
   - Database password: (choose a secure password)
   - Region: (closest to you)
4. **Get connection details** (Settings → Database):
   - Host: `db.xxxxxxxxxxxxx.supabase.co`
   - Database: `postgres`
   - Username: `postgres`
   - Password: (what you set above)
   - Port: `5432`

### Environment Variables

Configure these environment variables in your Render dashboard:

#### Required Variables:
- `SECRET_KEY`: Django secret key (will be auto-generated by Render)
- `DEBUG`: Set to `false` for production
- `ALLOWED_HOSTS`: Your Render domain (e.g., `student-management-system.onrender.com`)

#### Supabase Database Variables:
- `DB_NAME`: `postgres`
- `DB_USER`: `postgres`
- `DB_PASSWORD`: (your Supabase database password)
- `DB_HOST`: (your Supabase host, e.g., `db.xxxxxxxxxxxxx.supabase.co`)
- `DB_PORT`: `5432`

### Deployment Steps

1. **Push code to GitHub**:
   ```bash
   git add .
   git commit -m "Initial deployment setup"
   git remote add origin <your-github-repo-url>
   git push -u origin main
   ```

2. **Create Render Web Service**:
   - Go to [Render Dashboard](https://dashboard.render.com)
   - Click "New +" → "Web Service"
   - Connect your GitHub repository
   - Use these settings:
     - **Name**: `django-student-management` (or your preferred name)
     - **Environment**: `Python 3`
     - **Build Command**: `./build.sh`
     - **Start Command**: `gunicorn django_project.wsgi:application`
     - **Plan**: Free (or paid as needed)

3. **Configure Environment Variables**:
   - In Render dashboard, go to your service → Environment
   - Add all the environment variables listed above
   - **Important**: Set `DB_PASSWORD` manually as it contains sensitive information

4. **Deploy**:
   - Click "Create Web Service"
   - Render will automatically deploy your application
   - Monitor the build logs for any issues

### Post-Deployment

1. **Run Migrations** (if needed):
   - Go to your Render service → Shell
   - Run: `python manage.py migrate`

2. **Create Superuser** (if needed):
   - In Render shell: `python manage.py createsuperuser`

3. **Collect Static Files** (already handled by build.sh):
   - This is automatically done during build process

### Troubleshooting

#### Common Issues:

1. **Database Connection Error**:
   - Verify all database environment variables are correct
   - Check Aiven database is running and accessible

2. **Static Files Not Loading**:
   - Ensure `STATICFILES_STORAGE` is set to WhiteNoise
   - Verify `build.sh` runs `collectstatic`

3. **SECRET_KEY Error**:
   - Make sure `SECRET_KEY` environment variable is set
   - Use a strong, unique key for production

#### Build Command (`build.sh`):
```bash
#!/usr/bin/env bash
set -o errexit

# Install dependencies
pip install -r requirements.txt

# Collect static files
python manage.py collectstatic --noinput

# Run migrations
python manage.py migrate
```

### Security Notes

- Never commit sensitive information (passwords, secret keys) to version control
- Use environment variables for all sensitive data
- Set `DEBUG=False` in production
- Configure `ALLOWED_HOSTS` properly
- Keep your dependencies updated

### Support

For deployment issues:
1. Check Render build logs
2. Verify environment variables
3. Test database connectivity
4. Check Django logs in Render dashboard
